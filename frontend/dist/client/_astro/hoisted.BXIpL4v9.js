import{api as p}from"./api.CPfjwQVw.js";import"./hoisted.Qv3mm9Uz.js";import"./Navbar.astro_astro_type_script_index_0_lang.etmQtTSB.js";import"./Sidebar.astro_astro_type_script_index_0_lang.DZqaJy4g.js";const s=document.getElementById("register-form");s?.addEventListener("submit",async m=>{m.preventDefault();const t=s.querySelector('button[type="submit"]'),g=t.innerText,r=new FormData(s),n=r.get("name"),a=r.get("email"),o=r.get("password"),d=r.get("confirmPassword"),u=r.get("role"),e=window.AstroStatusModal["register-status-modal"];if(!n.trim()){e.show({title:"Nombre Obligatorio",message:"Por favor, ingresa tu nombre completo.",type:"warning"});return}const w=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;if(!a.trim()){e.show({title:"Correo Obligatorio",message:"El correo electrónico es necesario para crear tu cuenta.",type:"warning"});return}if(!w.test(a)){e.show({title:"Formato de Correo",message:"El formato del correo electrónico no es válido.",type:"warning"});return}if(!o){e.show({title:"Contraseña Obligatoria",message:"Debes definir una contraseña para tu cuenta.",type:"warning"});return}if(o.length<6){e.show({title:"Contraseña Débil",message:"La contraseña debe tener al menos 6 caracteres por seguridad.",type:"warning"});return}if(o!==d){e.show({title:"Contraseñas no coinciden",message:"Asegúrate de que ambas contraseñas escritas sean iguales.",type:"warning"});return}try{t.disabled=!0,t.innerText="Creando cuenta...",await p.register({name:n,email:a,password:o,role:u}),e.show({title:"¡Registro Exitoso!",message:"Bienvenido a MIRAI. Tu cuenta ha sido creada correctamente.",type:"success"}),setTimeout(()=>{window.location.href="/login"},2e3)}catch(i){console.error("Registration error:",i);let c="Error de Registro",l="No se pudo completar el registro. Intenta nuevamente.";i.error==="Email already registered"&&(c="Correo en Uso",l="Este correo electrónico ya está registrado. Intenta iniciar sesión o usa otro correo."),e.show({title:c,message:l,type:"error"})}finally{t.disabled=!1,t.innerText=g}});
