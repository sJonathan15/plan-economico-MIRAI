import{api as h}from"./api.CPfjwQVw.js";import"./Navbar.astro_astro_type_script_index_0_lang.etmQtTSB.js";import"./Sidebar.astro_astro_type_script_index_0_lang.DZqaJy4g.js";const L=new URLSearchParams(window.location.search),u=L.get("token"),d=document.getElementById("loading-state"),i=document.getElementById("error-state"),c=document.getElementById("form-state"),m=document.getElementById("success-state"),l=document.getElementById("reset-form"),s=document.getElementById("form-error");u?setTimeout(()=>o("form"),800):o("error");function o(e){d?.classList.add("hidden"),i?.classList.add("hidden"),c?.classList.add("hidden"),m?.classList.add("hidden"),e==="loading"&&d?.classList.remove("hidden"),e==="error"&&i?.classList.remove("hidden"),e==="form"&&c?.classList.remove("hidden"),e==="success"&&m?.classList.remove("hidden")}l?.addEventListener("submit",async e=>{e.preventDefault();const r=document.getElementById("password").value,f=document.getElementById("confirmPassword").value,t=l.querySelector('button[type="submit"]');if(r!==f){n("Las contrase침as no coinciden");return}if(r.length<6){n("La contrase침a debe tener al menos 6 caracteres");return}t&&(t.disabled=!0,t.innerHTML='<span class="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"></span>'),s?.classList.add("hidden");try{await h.resetPassword(u,r),o("success")}catch(a){console.error(a),n(a.message||"El enlace ha expirado o es inv치lido")}finally{t&&(t.disabled=!1,t.innerText="Restablecer Contrase침a")}});function n(e){s&&(s.innerText=e,s.classList.remove("hidden"))}
