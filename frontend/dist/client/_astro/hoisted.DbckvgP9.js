document.getElementById("sidebar");const c=document.getElementById("sidebar-toggle"),d=document.getElementById("user-name"),t=document.getElementById("user-initial"),s=document.getElementById("user-sidebar-img"),o=document.getElementById("user-dropdown"),l=document.getElementById("user-menu-btn");function a(){const e=localStorage.getItem("user");if(e&&d){const n=JSON.parse(e);if(d.innerText=n.name||"Usuario",n.profileImage){const i="http://localhost:3000";s.src=`${i}${n.profileImage}?t=${Date.now()}`,s.classList.remove("hidden"),t&&t.classList.add("hidden")}else s.classList.add("hidden"),t&&(t.innerText=(n.name||"U").charAt(0).toUpperCase(),t.classList.remove("hidden"))}}a();window.addEventListener("user-updated",a);function r(e){e?document.documentElement.classList.add("sidebar-collapsed"):document.documentElement.classList.remove("sidebar-collapsed"),localStorage.setItem("sidebar-collapsed",e.toString())}c?.addEventListener("click",()=>{const e=document.documentElement.classList.contains("sidebar-collapsed");r(!e)});document.getElementById("logout-btn-sidebar")?.addEventListener("click",()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/"});l?.addEventListener("click",e=>{e.stopPropagation(),o?.classList.toggle("hidden")});document.addEventListener("click",()=>{o?.classList.add("hidden")});
